<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            background-color: LightGray;
             }

h1 {
  color: white;
  text-align: center;
}

p {
  font-family: verdana;
  font-size: 20px;
}
}
    </style>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>


        $(document).ready(function(){
            $("#schBtn").click(function(){
                var filename =""

                var name = document.getElementById("name").value;
                var nic = document.getElementById("nic").value;
                var genderM = document.getElementById("genderM").value;
                var genderF = document.getElementById("genderF").value;
                var email = document.getElementById("email").value;
                var phoneNum = document.getElementById("phoneNum").value;
                var height = document.getElementById("height").value;
                var weight = document.getElementById("weight").value;
                var bodyFat = document.getElementById("bodyFat").value;
                var pressure = document.getElementById("pressure").value;

                var filepath = document.getElementById("file").value;
                if (filepath) {
                    var startIndex = (filepath.indexOf('\\') >= 0 ? filepath.lastIndexOf('\\') : filepath.lastIndexOf('/'));
                    filename = filepath.substring(startIndex);
                    if (filename.indexOf('\\') === 0 || filename.indexOf('/') === 0) {
                        filename = filename.substring(1);
                    }
                }

                if (filename != undefined && filename != null) {
                    window.location = '/schedule/process?imagePath=' + filename
                    + '&name='+name
                    + '&genderM='+genderM
                    + '&genderF='+genderF
                    + '&height='+height
                    + '&weight='+weight
                    + '&bodyFat='+bodyFat
                    + '&pressure='+pressure
                    ;
                }
            });
             $("#saveBtn").click(function(){

                var name = document.getElementById("name").value;
                var nic = document.getElementById("nic").value;
                var genderM = document.getElementById("genderM").value;
                var genderF = document.getElementById("genderF").value;
                var email = document.getElementById("email").value;
                var phoneNum = document.getElementById("phoneNum").value;
                var height = document.getElementById("height").value;
                var weight = document.getElementById("weight").value;
                var bodyFat = document.getElementById("bodyFat").value;
                var pressure = document.getElementById("pressure").value;

                if (document.getElementById('genderM').checked) {
                     gender = 'm'
                }else{
                     gender = 'f'
                }

                  var filepath = document.getElementById("file").value;
                if (filepath) {
                    var startIndex = (filepath.indexOf('\\') >= 0 ? filepath.lastIndexOf('\\') : filepath.lastIndexOf('/'));
                    filename = filepath.substring(startIndex);
                    if (filename.indexOf('\\') === 0 || filename.indexOf('/') === 0) {
                        filename = filename.substring(1);
                    }
                }

                if (filename != undefined && filename != null && nic != undefined && nic != null) {
                    alert("Saved");
                    window.location = '/save/?imagePath=' + filename
                    + '&name='+name
                    + '&nic='+nic
                    + '&gender='+gender
                    + '&height='+height
                    + '&weight='+weight
                    + '&bodyFat='+bodyFat
                    + '&pressure='+pressure
                    + '&phoneNum='+phoneNum
                    + '&email='+email
                    ;
                }else{
                    alert("Please enter valid data");
                }
         });
        });


    </script>
    <title>SmartScheduleSystem</title>
</head>

<body>
<h1>SMART SCHEDULE SYSTEM</h1>
<form action="insert.php" method="POST">
    <fieldset>
        <legend>PERSONAL INFO</legend>
        <table Style="width:100%">
            <tr>
                <td><label>Name</label></td>
                <td><input id="name" type="text" name="name" class="form-control" placeholder="Name" value=""/></td>
            </tr>
            <tr>
                <td><label>NIC Number</label></td>
                <td><input id="nic" type="text" name=nic" class="form-control" placeholder="NIC" value=""/></td>
            </tr>
            <tr>
                <td>Gender</td>
                <td><input id="genderM" type="radio" name="gender" value="m" checked="checked" >Male
                    <input id="genderF" type=radio name="gender" value="f">Female
                </td>
            </tr>
            <tr>
                <td>Email</td>
                <td>
                    <input id="email" type="mail" class="form-control" placeholder="Email" name="email" class="form-control">
                </td>
            </tr>
            <tr>
                <td>Phone Number</td>
                <td>
                <input id="phoneNum" type="phone" placeholder="+94*****" name="phone" class="form-control">
                </td>
            </tr>
            <tr>
                <td>Height</td>
                <td><input id="height" type="text" name="height" class="form-control"></td>
            </tr>
            <tr>
                <td>Weight</td>
                <td><input id="weight" type="text" name="weight" class="form-control"></td>
            </tr>
            <tr>
                <td>Body Fat Percentage</td>
                <td><input id="bodyFat" type="text" name="bodyfp" class="form-control"></td>
            </tr>
            <tr>
                <td>Pressure Level</td>
                <td><input id="pressure" type="text" name="pl" class="form-control"></td>
            </tr>
        </table>
        <!--        <p><input type="submit" class="btn btn-primary" action="insert.php" value="Submit" name="submit"></p>-->


        <p><input type="file" class="btn btn-success" accept="image/*" name="image" id="file"
                  onchange="loadFile(event)"></p>
        <p><img id="output" width="200"/></p>
        <script>
                        var loadFile = function(event) {
                        var image = document.getElementById("output");
                        image.src = URL.createObjectURL(event.target.files[0]);
                        };



        </script>

    </fieldset>
</form>
<p>
    <button type="button" class="btn btn-success" id="schBtn" name="schedule">Schedule</button>
</p>
<p><button type="button" class="btn btn-success" id="saveBtn" name="save">Save</button></p>

</body>
</html>